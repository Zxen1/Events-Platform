<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Menu Test</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        
        .menu { width: 400px; height: 35px; margin-bottom: 20px; position: relative; }
        
        .menu-button { width: 400px; height: 35px; display: flex; align-items: center; padding: 0 10px; box-sizing: border-box; background: #333; border-radius: 5px; cursor: pointer; }
        .menu-button-image { width: 30px; height: 30px; object-fit: contain; }
        .menu-button-text { flex: 1; text-align: left; padding-left: 10px; }
        .menu-button-arrow { width: 16px; height: 16px; margin-left: 10px; transition: transform 0.2s; display: flex; align-items: center; justify-content: center; font-size: 10px; line-height: 1; }
        .menu.open .menu-button-arrow { transform: rotate(180deg); }
        
        .menu-options { display: none; position: absolute; top: 35px; left: 0; width: 400px; background: #333; border-radius: 5px; max-height: 200px; overflow-y: auto; z-index: 10; }
        .menu.open .menu-options { display: block; }
        
        .menu-option { width: 400px; height: 35px; display: flex; align-items: center; padding: 0 10px; box-sizing: border-box; cursor: pointer; }
        .menu-option:hover { background: #444; }
        .menu-option-image { width: 30px; height: 30px; object-fit: contain; }
        .menu-option-text { flex: 1; text-align: left; padding-left: 10px; }
    </style>
</head>
<body>

    <div class="menu" id="menu-currency"></div>
    <div class="menu" id="menu-phone"></div>
    <div class="menu" id="menu-system"></div>
    <div class="menu" id="menu-icons"></div>

    <script>
        function createMenu(container, imageFolder, textSource) {
            container.innerHTML = `
                <div class="menu-button">
                    <img class="menu-button-image" src="" alt="">
                    <span class="menu-button-text">Select...</span>
                    <span class="menu-button-arrow">â–¼</span>
                </div>
                <div class="menu-options"></div>
            `;

            const button = container.querySelector('.menu-button');
            const optionsContainer = container.querySelector('.menu-options');
            const buttonImage = container.querySelector('.menu-button-image');
            const buttonText = container.querySelector('.menu-button-text');

            // Set initial selection to first item
            if (textSource.length > 0) {
                buttonImage.src = imageFolder + textSource[0].image;
                buttonText.textContent = textSource[0].text;
            }

            textSource.forEach(item => {
                const option = document.createElement('div');
                option.className = 'menu-option';
                option.innerHTML = `
                    <img class="menu-option-image" src="${imageFolder}${item.image}" alt="">
                    <span class="menu-option-text">${item.text}</span>
                `;
                option.addEventListener('click', function() {
                    buttonImage.src = imageFolder + item.image;
                    buttonText.textContent = item.text;
                    container.classList.remove('open');
                });
                optionsContainer.appendChild(option);
            });

            button.addEventListener('click', function() {
                container.classList.toggle('open');
            });
        }

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.menu')) {
                document.querySelectorAll('.menu').forEach(m => m.classList.remove('open'));
            }
        });

        // CURRENCY MENU
        const currencyFolder = 'assets/flags/';
        const currencyData = [
            { image: 'af.svg', text: 'AFN - Afghan Afghani' },
            { image: 'al.svg', text: 'ALL - Albanian Lek' }
        ];
        createMenu(document.getElementById('menu-currency'), currencyFolder, currencyData);

        // PHONE PREFIX MENU
        const phoneFolder = 'assets/flags/';
        const phoneData = [
            { image: 'af.svg', text: '+93 - Afghanistan' },
            { image: 'al.svg', text: '+355 - Albania' }
        ];
        createMenu(document.getElementById('menu-phone'), phoneFolder, phoneData);

        // SYSTEM IMAGES MENU
        const systemFolder = 'assets/system-images/';
        const systemData = [
            { image: '150x40-pill-70.webp', text: '150x40-pill-70.webp' },
            { image: '225x60-pill-2f3b73.webp', text: '225x60-pill-2f3b73.webp' }
        ];
        createMenu(document.getElementById('menu-system'), systemFolder, systemData);

        // SUBCATEGORY ICONS MENU
        const iconsFolder = 'assets/icons-30/';
        const iconsData = [
            { image: 'whats-on-category-icon-blue-30.webp', text: 'whats-on-category-icon-blue-30.webp' },
            { image: 'whats-on-category-icon-dark-yellow-30.webp', text: 'whats-on-category-icon-dark-yellow-30.webp' }
        ];
        createMenu(document.getElementById('menu-icons'), iconsFolder, iconsData);
    </script>

</body>
</html>
